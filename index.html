<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports TV Schedule - Tampa Bay Area</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>üèÜ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Trebuchet MS, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #0f3460 0%, #1a5276 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            border-bottom: 4px solid #e94560;
        }

        header h1 {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        header p {
            font-size: 0.95em;
            opacity: 0.95;
        }

        .date-range {
            font-weight: 600;
            margin-top: 10px;
            background: rgba(233, 69, 96, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
        }

        .filters-section {
            padding: 25px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-group:last-child {
            margin-bottom: 0;
        }

        .filter-label {
            font-weight: 600;
            color: #0f3460;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-dropdown {
            padding: 10px 14px;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.2s ease;
            min-width: 250px;
        }

        .filter-dropdown:hover {
            border-color: #0f3460;
            background: #f0f3ff;
        }

        .filter-dropdown:focus {
            outline: none;
            border-color: #0f3460;
            box-shadow: 0 0 0 3px rgba(15, 52, 96, 0.1);
        }

        .filter-btn {
            padding: 8px 14px;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            border-color: #0f3460;
            background: #f0f3ff;
        }

        .filter-btn.active {
            background: #0f3460;
            color: white;
            border-color: #0f3460;
        }

        .clear-filters {
            padding: 8px 14px;
            background: #e94560;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.2s ease;
        }

        .clear-filters:hover {
            background: #d63549;
        }

        .content {
            padding: 35px 30px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.1em;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 40px;
            background: #ffe0e0;
            border-radius: 8px;
            color: #c41e3a;
            margin: 20px;
        }

        .day-block {
            margin-bottom: 32px;
            border-left: 5px solid #e94560;
            padding-left: 20px;
        }

        .day-header {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
            gap: 12px;
        }

        .day-date {
            font-size: 1.4em;
            font-weight: 700;
            color: #0f3460;
            min-width: fit-content;
        }

        .day-name {
            font-size: 1.1em;
            color: #666;
            font-weight: 500;
        }

        .games-grid {
            display: grid;
            gap: 12px;
        }

        .game {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 14px 16px;
            display: grid;
            grid-template-columns: 1fr auto auto;
            align-items: center;
            gap: 16px;
            transition: all 0.2s ease;
        }

        .game:hover {
            background: #f0f3ff;
            border-color: #0f3460;
            transform: translateX(4px);
        }

        .game-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .game-matchup {
            font-weight: 600;
            color: #1a1a2e;
            font-size: 0.95em;
        }

        .game-league {
            font-size: 0.8em;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .game-time {
            text-align: right;
            font-weight: 700;
            font-size: 1.1em;
            color: #e94560;
            min-width: 80px;
            white-space: nowrap;
        }

        .game-channel {
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 600;
            text-align: center;
            min-width: 80px;
            white-space: nowrap;
        }

        .channel-espn {
            background: #1d4ed8;
        }

        .channel-abc {
            background: #00a651;
        }

        .channel-fox {
            background: #003da5;
        }

        .channel-cbs {
            background: #c41e3a;
        }

        .channel-nbc {
            background: #f47920;
        }

        .channel-peacock {
            background: #553399;
        }

        .channel-cwnetwork {
            background: #e50000;
        }

        .channel-nflnet {
            background: #1f4788;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #888;
            font-style: italic;
        }

        footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e0e0e0;
            font-size: 0.85em;
            color: #666;
            text-align: center;
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 15px;
            }

            header {
                padding: 25px 20px;
            }

            header h1 {
                font-size: 1.5em;
                margin-bottom: 10px;
            }

            .filters-section {
                padding: 20px 15px;
            }

            .filter-btn {
                padding: 7px 12px;
                font-size: 0.8em;
            }

            .content {
                padding: 20px 15px;
            }

            .game {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 12px 14px;
            }

            .game-time {
                text-align: left;
                font-size: 1em;
                min-width: auto;
            }

            .game-channel {
                font-size: 0.8em;
                padding: 5px 10px;
                min-width: auto;
            }

            .day-date {
                font-size: 1.15em;
            }

            .day-name {
                font-size: 0.95em;
            }

            .game-matchup {
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 1.3em;
            }

            .day-date {
                font-size: 1em;
            }

            .game-matchup {
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÜ SPORTS TV SCHEDULE</h1>
            <p>Tampa Bay Area Market</p>
            <div class="date-range">December 27, 2025 ‚Äì January 31, 2026</div>
        </header>

        <div class="filters-section">
            <div class="filter-group">
                <div class="filter-label">Filter by Network:</div>
                <select id="networkFilter" class="filter-dropdown" onchange="updateNetworkFilter()">
                    <option value="">All Networks</option>
                </select>
            </div>

            <div class="filter-group">
                <div class="filter-label">Filter by Sport:</div>
                <div class="filter-buttons" id="sportFilters"></div>
            </div>

            <div class="filter-group">
                <div class="filter-label">Filter by Day:</div>
                <select id="dayFilter" class="filter-dropdown" onchange="updateDayFilter()">
                    <option value="">All Days</option>
                </select>
            </div>

            <div style="margin-top: 15px;">
                <button class="clear-filters" onclick="clearFilters()">Clear All Filters</button>
            </div>
        </div>

        <div class="content" id="content">
            <div class="loading">Loading schedule...</div>
        </div>

        <footer>
            All times listed in Eastern Time (ET). Schedule auto-updates when source data changes.
        </footer>
    </div>

    <script>
        let allGames = [];
        let activeFilters = {
            networks: [],
            sports: [],
            days: []
        };

        // Google Sheet Configuration
        const SHEET_ID = '1gs8pwsOGR7yepLg1bTTthYmZ_NNprgP6-1Znu4ieRXM';
        const SHEET_NAME = 'schedule_template';
        const API_KEY = 'AIzaSyCBBft_Uau-bxJqHvB7GG3Dj9pH_7OcLJg';

        // Fetch data from Google Sheet
        async function loadScheduleData() {
            try {
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${SHEET_NAME}?key=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();

                if (data.values) {
                    parseGamesFromSheet(data.values);
                    initializeFilters();
                    displaySchedule();
                }
            } catch (error) {
                console.error('Error loading schedule:', error);
                document.getElementById('content').innerHTML = `
                    <div class="error">
                        <strong>Error loading schedule.</strong><br>
                        Please check that your Google Sheet ID and API key are configured correctly.
                    </div>
                `;
            }
        }

        function parseGamesFromSheet(values) {
            // First row is headers: Date, Time, Matchup, Network, Sport
            allGames = [];
            
            for (let i = 1; i < values.length; i++) {
                const row = values[i];
                if (row.length >= 5) {
                    allGames.push({
                        date: row[0].trim(),
                        time: row[1].trim(),
                        matchup: row[2].trim(),
                        network: row[3].trim(),
                        sport: row[4].trim()
                    });
                }
            }
        }

        function initializeFilters() {
            const networks = [...new Set(allGames.map(g => g.network))].sort();
            const sports = [...new Set(allGames.map(g => g.sport))].sort();
            const days = [...new Set(allGames.map(g => g.date))];

            // Create network filter dropdown
            const networkSelect = document.getElementById('networkFilter');
            networks.forEach(network => {
                const option = document.createElement('option');
                option.value = network;
                option.textContent = network;
                networkSelect.appendChild(option);
            });

            // Create sport filter buttons
            const sportDiv = document.getElementById('sportFilters');
            sports.forEach(sport => {
                const btn = document.createElement('button');
                btn.className = 'filter-btn';
                btn.textContent = sport;
                btn.onclick = () => toggleFilter('sports', sport);
                sportDiv.appendChild(btn);
            });

            // Create day filter dropdown
            const daySelect = document.getElementById('dayFilter');
            days.forEach(day => {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day;
                daySelect.appendChild(option);
            });
        }

        function updateNetworkFilter() {
            const networkSelect = document.getElementById('networkFilter');
            const selectedNetwork = networkSelect.value;
            activeFilters.networks = selectedNetwork ? [selectedNetwork] : [];
            displaySchedule();
        }

        function updateDayFilter() {
            const daySelect = document.getElementById('dayFilter');
            const selectedDay = daySelect.value;
            activeFilters.days = selectedDay ? [selectedDay] : [];
            displaySchedule();
        }

        function toggleFilter(type, value) {
            const filters = activeFilters[type];
            if (filters.includes(value)) {
                filters.splice(filters.indexOf(value), 1);
            } else {
                filters.push(value);
            }
            updateFilterButtons();
            displaySchedule();
        }

        function updateFilterButtons() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                const value = btn.textContent;
                const isActive = 
                    activeFilters.networks.includes(value) ||
                    activeFilters.sports.includes(value) ||
                    activeFilters.days.includes(value);
                
                btn.classList.toggle('active', isActive);
            });
        }

        function clearFilters() {
            activeFilters.networks = [];
            activeFilters.sports = [];
            activeFilters.days = [];
            document.getElementById('networkFilter').value = '';
            document.getElementById('dayFilter').value = '';
            updateFilterButtons();
            displaySchedule();
        }

        function getChannelClass(network) {
            const normalized = network.toLowerCase().replace(/\s+/g, '');
            const classMap = {
                'espn': 'channel-espn',
                'abc': 'channel-abc',
                'fox': 'channel-fox',
                'cbs': 'channel-cbs',
                'nbc': 'channel-nbc',
                'peacock': 'channel-peacock',
                'cwnetwork': 'channel-cwnetwork',
                'nflnet': 'channel-nflnet',
                'nflnetwork': 'channel-nflnet'
            };
            return classMap[normalized] || 'channel-espn';
        }

        function displaySchedule() {
            let filteredGames = allGames;

            // Apply filters
            if (activeFilters.networks.length > 0) {
                filteredGames = filteredGames.filter(g => activeFilters.networks.includes(g.network));
            }
            if (activeFilters.sports.length > 0) {
                filteredGames = filteredGames.filter(g => activeFilters.sports.includes(g.sport));
            }
            if (activeFilters.days.length > 0) {
                filteredGames = filteredGames.filter(g => activeFilters.days.includes(g.date));
            }

            // Group by date
            const groupedByDate = {};
            filteredGames.forEach(game => {
                if (!groupedByDate[game.date]) {
                    groupedByDate[game.date] = [];
                }
                groupedByDate[game.date].push(game);
            });

            // Sort dates in the order they appear in the original data (chronological)
            const dateOrder = [...new Set(allGames.map(g => g.date))];
            const sortedDates = dateOrder.filter(date => groupedByDate[date]);

            // Build HTML
            let html = '';
            if (sortedDates.length === 0) {
                html = '<div class="no-results">No games match your filters. Try adjusting your selection.</div>';
            } else {
                sortedDates.forEach(date => {
                    html += `<div class="day-block">
                        <div class="day-header">
                            <div class="day-date">${date}</div>
                        </div>
                        <div class="games-grid">`;

                    groupedByDate[date].forEach(game => {
                        const channelClass = getChannelClass(game.network);
                        html += `
                            <div class="game">
                                <div class="game-info">
                                    <div class="game-league">${game.sport}</div>
                                    <div class="game-matchup">${game.matchup}</div>
                                </div>
                                <div class="game-time">${game.time}</div>
                                <div class="game-channel ${channelClass}">${game.network}</div>
                            </div>
                        `;
                    });

                    html += '</div></div>';
                });
            }

            document.getElementById('content').innerHTML = html;
        }

        // Load data when page loads
        window.addEventListener('load', loadScheduleData);

        // Auto-refresh every 5 minutes
        setInterval(loadScheduleData, 300000);
    </script>
</body>
</html>
